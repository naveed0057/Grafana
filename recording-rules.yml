groups:
  - name: node_usage_rules
    rules:
      - record: node:cpu_usage:percent
        expr: avg(rate(node_cpu_seconds_total{mode!="idle"}[5m])) * 100

      - record: node:memory_usage:percent
        expr: (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100

      - record: node:disk_usage:percent
        expr: (node_filesystem_size_bytes{fstype!~"tmpfs|overlay"} - node_filesystem_free_bytes{fstype!~"tmpfs|overlay"}) / node_filesystem_size_bytes{fstype!~"tmpfs|overlay"} * 100

